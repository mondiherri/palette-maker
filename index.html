<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="src/styles.css">
  <title>OKLCH Palette Maker</title>
</head>
<body>
  <h1><a href="https://oklch.com">OKLCH</a> Palette Maker</h1>
  <div class="app">
    <!-- LEFT: Controls -->
    <div class="card">
      <div class="controls">
        <!-- Always visible -->
        <div class="row">
          <div>
            <label>Target palette size</label>
            <input id="targetSize" type="number" min="1" max="200" step="1" value="25" />
          </div>
		  <div >
            <label>Starting color (CSS or Hex)</label>
            <input id="initialColor" type="text" placeholder="oklch(60% 0.12 30)" value="oklch(99.3% 0.2 104.3)"/>
          </div>
         
        </div>

        <div class="row">
          <div>
            <label>Min Δ (OKLCH)</label>
            <input id="minDistance" type="number" step="0.001" min="0" max="1" value="0.14" />
          </div>
          
        </div>
		
		<div class="row" style="margin-top:8px">
              <div>
                <label>Lightness L min..max</label>
                <div class="row">
                  <input id="lMin" type="number" step="1" value="30" />
                  <input id="lMax" type="number" step="1" value="99" />
                </div>
                <div class="note">Enter % (0–100). Internally 0–1.</div>
              </div>
              <div>
                <label>Chroma C min..max</label>
                <div class="row">
                  <input id="cMin" type="number" step="0.005" value="0.06" />
                  <input id="cMax" type="number" step="0.005" value="0.4" />
                </div>
                <div class="note">Typical ~0–0.4 for OKLCH.</div>
              </div>
            </div>

            <div class="row" >
				<div>
              <label>Exclude colors (one per line)</label>
				  <div class="row" >
				  <textarea id="excludeColors" placeholder="#000000
	oklch(90% 0.02 0)
	..."></textarea>
				  </div>
			  </div>
			<div>
            <label>Exclude hue range (deg)</label>
            <div class="row" >
              <input id="hueExStart" type="number" step="0.1" min="0" max="360" placeholder="300" />
              <input id="hueExEnd" type="number" step="0.1" min="0" max="360" placeholder="40" />
            </div>
            <div class="note">Wrap-around supported (e.g., 300 → 40 excludes [300°,360°)∪[0°,40°], i.e. reds).</div>
              <div class="note">Excluded colors are skipped when generating.</div>
			  </div>
          </div>
          
		
		<div class="row">
			<div>
				<label>Show in sRGB Gamut</label>
					<input id="sRGBGamut" type="checkbox" checked/>
					<div class="note">Only RGB can be defined in some software.<br>Uncheck to see OKLCH colors.</div>
			</div>
			<div>
				<button id="btnClear">Clear Palette</button>
			</div>
        </div>
		
		
        <!-- Tabs -->
        <div class="tabs">
          <div class="tablist" role="tablist" aria-label="Palette generators">
            <button id="tabBasic" class="tab" role="tab" aria-selected="true" aria-controls="panelBasic">Generate all / Random / Step</button>
            <button id="tabDirectional" class="tab" role="tab" aria-selected="false" aria-controls="panelDirectional">Directional</button>
            <button id="tabSettings" class="tab" role="tab" aria-selected="false" aria-controls="panelSettings">Text Preview Settings</button>
          </div>

          <!-- Generate / Step -->
          <section id="panelBasic" class="tabpanel active" role="tabpanel" aria-labelledby="tabBasic">
            <div>
              <label>Show colors in palette (one per line: <span class="muted monospace">#ff6600</span> or <span class="monospace">oklch(60% 0.15 30)</span>)</label>
              <textarea id="inputColors" placeholder="#0ea5e9
#22c55e
oklch(72% 0.12 340)
..."></textarea>
              <div class="btnbar">
                <button id="btnApplyInput">Apply input to palette</button>
                
              </div>
			  
			  <div class="btnbar">
				  <div class="tooltip">
					  <button id="btnGenFromInitial" class="primary">Generate from initial (even hues)</button>
				      <span class="tooltiptext">When no initial color (i.e. hue) is defined, generation starts from a random hue.</span>
				  </div>
              <button id="btnGenRandom">Generate randomly (even hues)</button>
              <button id="btnAddNext">Add next (respect L C H ranges, min Δ)</button>
            </div>
            </div>

			</section>
          <!-- Directional -->
           <section id="panelDirectional" class="tabpanel" role="tabpanel" aria-labelledby="tabDirectional">
            <div id="dirPreview" class="dir-preview" aria-label="Selected direction preview"></div>
			<div>
                <label>Direction window (± degrees)</label>
                <input id="hueWindow" type="number" min="1" max="180" step="1" value="15" />
                <div class="note">Sector = [center−window, center+window], intersected with the excluded hue rule.</div>
            </div>
			<div>
              <label for="hueSlider">Directional hue (0–360° OKLCH)</label>
              <div class="hue-slider-wrap">
                <input id="hueSlider" class="hue-slider" type="range" min="0" max="360" step="1" value="200" />
              </div>
            </div>
			
			<div class="range-row">
                <label>Directional Lightness (L)</label>
                <div class="note" id="dirLReadout">60%</div>
                <input id="dirL" type="range" min="0" max="100" step="1" value="60" />
            </div>
			

            <div class="range-row">
              <label>Directional Chroma (C)</label>
              <div class="note" id="dirCReadout">0.12</div>
              <input id="dirC" type="range" min="0" max="0.4" step="0.001" value="0.12" />
            </div>

            <div class="btnbar" style="margin-top:8px">
              <button id="btnAddNextDirectional">Add next like Hue</button>
                          <div class="note">Respects Min Δ in OkLAB color space</div>
            </div>
          </section>
			
          <!-- Settings -->
          <section id="panelSettings" class="tabpanel" role="tabpanel" aria-labelledby="tabSettings">
            <div class="row">
              <div>
                <label for="previewFont">Sample font</label>
                <select id="previewFont">
                  <option value="sourceSans">&quot;Source Sans Pro&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif</option>
                  <option value="arial">Arial</option>
                  <option value="arialBlack">Arial Black</option>
                  <option value="calibri">Calibri</option>
                  <option value="cambria">Cambria</option>
                  <option value="candara">Candara</option>
                  <option value="comicSans">Comic Sans MS</option>
                  <option value="consolas">Consolas</option>
                  <option value="constantia">Constantia</option>
                  <option value="corbel">Corbel</option>
                  <option value="courierNew">Courier New</option>
                  <option value="dotum">Dotum</option>
                  <option value="ebrima">Ebrima</option>
                  <option value="franklinGothicMedium">Franklin Gothic Medium</option>
                  <option value="gabriola">Gabriola</option>
                  <option value="georgia">Georgia</option>
                  <option value="leelawadee">Leelawadee</option>
                  <option value="lucidaSansUnicode">Lucida Sans Unicode</option>
                  <option value="malgunGothic">Malgun Gothic</option>
                  <option value="microsoftHimalaya">Microsoft Himalaya</option>
                  <option value="microsoftJhengHei">Microsoft JhengHei</option>
                  <option value="microsoftNewTaiLue">Microsoft New Tai Lue</option>
                  <option value="microsoftPhagsPa">Microsoft PhagsPa</option>
                  <option value="microsoftSansSerif">Microsoft Sans Serif</option>
                  <option value="microsoftTaiLe">Microsoft Tai Le</option>
                  <option value="microsoftYaHei">Microsoft YaHei</option>
                  <option value="palatinoLinotype">Palatino Linotype</option>
                  <option value="segoePrint">Segoe Print</option>
                  <option value="segoeUI">Segoe UI</option>
                  <option value="tahoma">Tahoma</option>
                  <option value="timesNewRoman">Times New Roman</option>
                  <option value="trebuchetMS">Trebuchet MS</option>
                  <option value="verdana">Verdana</option>
                </select>
              </div>
              <div>
                <label for="previewFontSize">Font size (px)</label>
                <input id="previewFontSize" type="number" min="10" max="24" step="1" value="13" />
              </div>
              <div>
                <label for="previewLineHeight">Line spacing</label>
                <input id="previewLineHeight" type="number" min="1" max="2.5" step="0.05" value="1.55" />
              </div>
            </div>
            <div>
              <label for="previewBackground">Preview background</label>
              <input id="previewBackground" type="color" value="#fdfdf9" />
              <div class="note">Adjusts the document highlight preview backdrop.</div>
            </div>
          </section>
        </div>

        <!-- Export (always visible) -->
        <div class="export">
          <label>Export</label>
          <div class="btnbar">
            <button id="btnCopyOKLCH">Copy as CSS oklch()</button>
            <button id="btnCopyHex">Copy as Hex</button>
            <button id="btnCopyJSON">Copy as JSON</button>
          </div>
          <div class="note" style="margin-top:6px">Stats printed to console via <span class="monospace">palette-lab</span> if available.</div>
        </div>
      </div>
    </div>


    <!-- RIGHT: Palette + Preview -->
    <div class="right-panels">
      <!-- Palette grid and statistics -->
      <div class="card palette-card" id="palettePanel">
        <div class="footer">
          <div class="small">Palette (<span id="count">0</span>/<span id="targetSpan">25</span>)</div>
          <div class="stats">
            L<span class="pill"><span id="statL">–</span></span>
            C<span class="pill"><span id="statC">–</span></span>
            Δ<sub>avg</sub><span class="pill"><span id="statD">–</span></span>
          </div>
        </div>
        <div class="layout-controls">
          <label for="layoutMode">Layout</label>
          <select id="layoutMode">
              <option value="column">Single column</option>
			  <option value="grid">Grid</option>
          </select>
        </div>
        <div id="grid" class="grid" style="margin-top:10px;"></div>
      </div>
      <div id="panelResizer" class="panel-resizer" role="separator" aria-orientation="vertical" aria-label="Resize palette and preview panels" aria-controls="palettePanel highlightPanel" tabindex="0"></div>
      <div class="card highlight-card" id="highlightPanel">
        <div class="highlight-header">
          <div class="highlight-header-text">
            <div class="small">Document highlight preview</div>
            <div class="small muted">Mapped to palette</div>
          </div>
          <button id="btnRandomizeText" type="button" title="Replace preview text with a randomized sample">Randomize text</button>
        </div>
        <div class="highlight-body">
          <!-- Scrollable highlight text preview -->
          <div id="highlightText" class="sample-text" aria-label="Example document with highlights">
          <p>
            obtain the <span data-color-index="0">codebook</span> corresponding to the first <span data-color-index="1">data set</span>.
            The <span data-color-index="2">first preset number</span> and the <span data-color-index="3">second preset number</span>
            may be set according to actual situations, which is not specifically limited in embodiments of the
            <span data-color-index="4">present disclosure</span>.
          </p>
          <p>
            <span data-color-index="5">[0066]</span> Particularly, it is assumed that there are
            <span data-color-index="6">N training samples</span>, and the number of dimensions D of each sample are
            <span data-color-index="7">64</span>. Each sample is divided into <span data-color-index="8">M=8 segments</span>, and each
            segment is clustered into <span data-color-index="9">K=256 classes</span> to obtain
            <span data-color-index="10">M*K cluster centers</span>. The number of dimensions of each cluster center are
            <span data-color-index="11">D/M</span>, and these cluster centers are called a
            <span data-color-index="12">codebook</span>.
          </p>
          <p>
            During training, each <span data-color-index="13">cluster center</span> is updated through iteration, and the
            <span data-color-index="14">vector quantization</span> loss encourages <span data-color-index="15">convergence</span>
            while stabilizing the <span data-color-index="16">reconstruction error</span> for subsequent deployments.
          </p>
          <p>
            When deployed, the <span data-color-index="17">encoded samples</span> are matched against a
            <span data-color-index="18">lookup table</span> to accelerate <span data-color-index="19">inference</span>, and the
            <span data-color-index="20">calibration stage</span> verifies the <span data-color-index="21">quantized outputs</span>
            under varying <span data-color-index="22">production conditions</span>.
          </p>
          </div>
        </div>
      </div>
      <!-- Highlight coverage mini-map -->
      <div id="overviewPanel" class="card overview-panel" aria-label="Highlight overview">
        <div id="overviewHeader" class="overview-header" aria-live="polite" aria-label="Palette lanes overview"></div>
        <div class="overview-wrap">
          <canvas id="overviewCanvas" width="96" height="100%" role="img" aria-label="Highlight overview"></canvas>
        </div>
      </div>

	 <div class="container footer-buffer"><!-- empty --></div>   
  </div>

 <footer class="container global-footer">
    By Edmond Herri. 
	Check it on <a href="https://github.com/mondiherri/palette-maker/">GitHub</a>. 
    Inspired by this <a href="https://aeon.co/videos/after-centuries-of-trying-weve-yet-to-arrive-at-a-perfect-way-to-map-colour">article</a> in Aeon magazine.
    see also <a href="https://bottosson.github.io/posts/oklab/">post</a> by Björn Ottosson. 
  </footer>

  <script src="src/app.js"></script>
</body>
</html>























































